function submitForm(){MAPI.submit(".form","audi_sport_2015",submitcheck,null,function(e){console.log(e),alert(e.err?105==e.status?"您已注册成功！":2==e.status?"手机号码格式不正确":"网络错误！请稍后再试":"提交成功！")})}document.addEventListener("touchmove",function(e){e.preventDefault()},!1);var audio=document.getElementById("audio"),audio2=document.getElementById("audio2");$(".audio").on("tap",function(){audio.paused?audio.play():audio.pause()});var myScreen=$("#screen"),p1_txtspan=$(".ld_txt span"),loading=$("#loading"),page1=$(".page1"),arrowup=$(".arrowup"),point,line,dis,page1pic=0,timer3=null;$.loader(myScreen,"_src1",null,function(){myScreen.fadeIn(),$.loader(myScreen,"_src2",function(e,n){var t=parseInt(e/n*100);p1_txtspan.html(t)},function(){loading.fadeOut(function(){page1.addClass("show"),timer3=setInterval(function(){page1pic++,$(".p1_kvlist img").removeClass("show").eq(page1pic).addClass("show"),page1pic>5&&(clearInterval(timer3),$(".p1_kvlist img").eq(5).addClass("show"))},70)}),point=$(".p3_point"),line=$(".p3_bridge"),dis=point.eq(0).width()/2,pointpos=[];for(var e=0;e<point.length;e++)pointpos.push({top:point[e].offsetTop,left:point[e].offsetLeft})})});var angle=0,intheend=!1,p1_qurcir=$(".p1_qurcir"),p1_bluecir=$(".p1_bluecir");touch.on("#target","touchstart",function(e){e.startRotate(),e.preventDefault()}),touch.on("#target","rotate",function(e){var n=angle+e.rotation;"end"===e.fingerStatus&&(angle+=e.rotation,intheend&&(p1_bluecir.removeClass("blink"),page1.anim({translateY:"-100%"},.8,"ease",function(){page1.removeClass("show"),page1.next().addClass("show")}))),(n>300&&!intheend||-300>n&&!intheend)&&(intheend=!0,p1_qurcir.hide(),p1_bluecir.show().addClass("blink")),this.style.webkitTransform="rotate("+n+"deg)"}),pageMoving=!0;var start,page2=$(".page2"),page3=$(".page3").on("swipeUp",function(){nextpage.call(this,function(){start=!0},function(){arrowup.fadeOut()})}),n=0,timer=null,timer2=null,p2_line=$(".p2_line"),p2_car=$(".p2_car"),startX,startY,moveX,moveY;page2.get(0).ontouchstart=function(e){var t=e.touches[0].pageX,a=e.touches[0].pageY;clearInterval(timer),page2.get(0).ontouchmove=function(e){var o=e.touches[0].pageX,s=e.touches[0].pageY,p=(new Date).getTime();if(p-last_update>100){var r=p-last_update;last_update=p;var l=Math.abs(a+t-o-s)/r*1e4;if(l>500){if(n+=85e-5*l,n>100){n=100,p2_car.addClass("goin"),audio2.play(),clearInterval(timer);var u=$(".dr"),d=$(".dr_pic");i=0,setTimeout(function(){u.fadeIn(function(){page2.removeClass("show").anim({translateY:"-100%"},.1,"ease",function(){p2_car.removeClass("goin"),n=0,p2_line.css("width",n+"%"),document.ontouchend=null})}),timer2=setInterval(function(){i++,i>12&&(u.fadeOut(function(){page3.addClass("show star"),d.removeClass("show"),pageMoving=!0,i=0,d.removeClass("show")}),clearInterval(timer2)),d.eq(i).addClass("show")},300)},2e3)}p2_line.css("width",n+"%"),t=o,a=s}}},document.ontouchend=function(){100>n&&(timer=setInterval(function(){n-=1.25,0>n&&(n=0),p2_line.css("width",n+"%")},30))}};var nowPoint=0,fromone=!1,a=window.innerHeight/622,bili=a*a*a*a;$(".p3_point").eq(0).on("touchstart",function(e){$(".p3_tips").fadeOut(),page3.removeClass("star"),fromone=!0,point.eq(0).addClass("now"),$(document).on("touchmove",function(e){var n=e.touches[0].pageX,t=e.touches[0].pageY;4>nowPoint&&fromone&&n>pointpos[nowPoint+1].left+dis/1.5&&n<pointpos[nowPoint+1].left+1.2*dis&&t>pointpos[nowPoint+1].top+dis/5.8*bili&&t<pointpos[nowPoint+1].top+dis/1.3*bili&&(line.eq(nowPoint).show(),point.eq(nowPoint+1).addClass("now"),nowPoint++,nowPoint>point.length-1&&(nowPoint=point.length-1))}),$(document).on("touchend",function(){document.ontouchstart=null,4!=nowPoint?($(".p3_tips").fadeIn(),page3.addClass("star"),point.removeClass("now"),line.hide(),nowPoint=0,fromone=!1):(page3.addClass("done"),arrowup.fadeIn(),pageMoving=!1)})});var p3_hand=$(".p3_hand"),block=$(".block"),p3_bridge=$(".p3_bridge"),p3_window=$(".p3_window"),p3_kuang=$(".p3_kuang"),p3_close=$(".p3_close").tap(function(){p3_window.fadeOut()}),p3_btnbox=$(".p3_btn").tap(function(){var e=$(this).index();p3_kuang.find("div").hide(),p3_close.show(),p3_kuang.find("div").eq(e).show(),p3_window.fadeIn()}),x,y,z,last_x,last_y,last_z,last_update=0,SHAKE_THRESHOLD=1800,p4_wall=$(".p4_wall"),page4=$(".page4").on("swipeDown",function(){prevpage.call(this,null,null)}),page5=$(".page5").on("swipeUp",nextpage);window.ondevicemotion=function(e){if(start){var n=e.accelerationIncludingGravity,t=(new Date).getTime();if(t-last_update>100){var a=t-last_update;last_update=t,x=n.x,y=n.y,z=n.z,-.1>x?p4_wall.removeClass("left right").addClass("left"):x>.1&&p4_wall.removeClass("left right").addClass("right");var o=Math.abs(x+y+z-last_x-last_y-last_z)/a*1e4;o>SHAKE_THRESHOLD&&(arrowup.fadeIn(),start=!1,page4.addClass("move"),setTimeout(function(){page5.addClass("show"),setTimeout(function(){page4.removeClass("show").anim({translateY:"-100%"},.3,"ease"),$(".page5_s").fadeIn()},2e3)},1e3)),last_x=x,last_y=y,last_z=z}}};var page51=$(".page51").on("swipeUp",nextpage).on("swipeDown",function(){page5.fadeIn(.01).anim({translateY:"0"},.5,"ease")}),page52=$(".page52").on("swipeUp",nextpage).on("swipeDown",prevpage),page53=$(".page53").on("swipeUp",nextpage).on("swipeDown",prevpage),page54=$(".page54").on("swipeUp",nextpage).on("swipeDown",prevpage),page55=$(".page55").on("swipeUp",nextpage).on("swipeDown",prevpage),xing=$(".xing").tap(function(){xing.removeClass("bie"),$(this).addClass("bie"),$(".sex").val($(this).find("span").html())}),province=$(".province"),city=$(".city");linkage(province,city,proty);var tapOk=!1;document.getElementById("p6_openletter").addEventListener("webkitAnimationEnd",function(){$(".p6_letterbottom").hide()});var p6_openletter=$(".p6_openletter"),back=$(".back").click(function(){prevpage.call($(".page6"),function(){arrowup.fadeIn(),setTimeout(function(){p6_openletter.fadeOut()},1e3)},null)});$(".submit").click(submitForm);var submitcheck=function(e,n){function t(e){setTimeout(function(){alert(e)},300)}var a=$(".name").val();switch(regex=/^([\u4e00-\u9fa5]){1,20}$/gi,e){case"hiddenbox":return n&&n?!0:(t("请接收“个人信息保护法律声明”！"),!1);break;case"name":return regex.test(a)?!0:(t("“姓名”格式不正确！"),!1);break;case"sex":return n?!0:(t("请选择称谓！"),!1);break;case"mobile":return n?!0:(t("手机号格式不正确"),!1);break;case"province":return n&&"请选择"!=n?!0:(t("“省份”不能为空！"),!1);break;case"city":return n&&"请选择"!=n?!0:(t("“城市”不能为空！"),!1);break;case"dealer":return n&&"请选择"!=n?!0:(t("“经销商”不能为空！"),!1);break;case"love":return n?!0:(t("请选择“您感兴趣的车型”"),!1);break;case"address":return n?!0:(t("请填写具体街道地址"),!1)}};